---
- name: mount disk 
  hosts: kube-node
  remote_user: yqg
  gather_facts: no
  tasks:
    - name: file -s /dev/xvdf 
      shell: file -s /dev/xvdf 
      become: true
      become_user: root

    - name: mkdir /data
      file: 
        path: /data
        state: directory
        owner: yqg
        group: yqg
      become: true
      become_user: root

    - name: mkfs -t ext4 /dev/xvdf
      shell: mkfs -t ext4 /dev/xvdf
      become: true
      become_user: root

    - name: mount /dev/xvdf /data
      shell: mount /dev/xvdf /data
      become: true
      become_user: root

    - name: echo '\n/dev/xvdf /data ext4 defaults 0 0' >> /etc/fstab
      shell: echo '\n/dev/xvdf /data ext4 defaults 0 0' >> /etc/fstab
      become: true
      become_user: root
      

